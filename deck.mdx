import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, vsDark } from "@code-surfer/themes";
import { Split, Horizontal } from 'mdx-deck'
import Content from './layouts/content'


export const theme = vsDark;

# ReactJS Crash Course

Quick start guide to ReactJS and building frontend applications

---

# Prerequisites

[JavaScript Primer](https://reacttraining.com/blog/javascript-the-react-parts/) to get caught up on modern JavaScript

[Learn HTML in X Minutes](https://learnxinyminutes.com/docs/html/) understand basic HTML syntax

---

# Components

Everything in React is a Component

import everything_is_a_component from './images/everything-is-a-component.png'

<img width="500px" height="500px" src={everything_is_a_component} />

---


# DELETE THIS

Example of inline React

import Counter from './components/Counter'

<Counter />

---

import Hello from './components/part1/Hello'

<Hello />

<CodeSurfer>

```js
class Hello extends React.Component {
  render() {
    return <h1>Hello world!</h1>;
  }
}
```

</CodeSurfer>

---

import FunctionalHello from './components/part1/FunctionalHello'

<FunctionalHello />

<CodeSurfer>

```js file=./components/part1/FunctionalHello.js
```

</CodeSurfer>

---

import ComposedApp from './components/part1/ComposedApp'

<ComposedApp />

<CodeSurfer>

```js file=./components/part1/ComposedApp.js
```

</CodeSurfer>

---

# Handling Data

1. props: external, not controlled by the component itself, passed from parents
2. state: private, and controllable from the component itself


---

# Passing Data with Props

<CodeSurfer>

```jsx subtitle="Before"
class App extends React.Component {
  render() {
    return (
      <div>
        <Greeting />
      </div>
    );
  }
}

class Greeting extends React.Component {
  render() {
    const greeting = 'Welcome to React';
    return <h1>{greeting}</h1>;
  }
}
```

```jsx subtitle="Want to pass props from App to Greeting" 5,14
class App extends React.Component {
  render() {
    return (
      <div>
        <Greeting />
      </div>
    );
  }
}

class Greeting extends React.Component {
  render() {
    const greeting = 'Welcome to React';
    return <h1>{greeting}</h1>;
  }
}
```

```jsx subtitle="After"
class App extends React.Component {
  render() {
    const greeting = 'Welcome to React';
    return (
      <div>
        <Greeting greeting={greeting} />
      </div>
    );
  }
}
 
class Greeting extends React.Component {
  render() {
    return <h1>{this.props.greeting}</h1>
  }
}
```

</CodeSurfer>

---

<CodeSurfer>

```jsx title="Passing props for functionl components"
class App extends Component {
  render() {
    const greeting = 'Welcome to React';
 
    return (
      <div>
        <Greeting greeting={greeting} />
      </div>
    );
  }
}
 
const Greeting = props => <h1>{props.greeting}</h1>;
```

```jsx subtitle="Props are received in the function signature as props" 13
class App extends Component {
  render() {
    const greeting = 'Welcome to React';
 
    return (
      <div>
        <Greeting greeting={greeting} />
      </div>
    );
  }
}
 
const Greeting = props => <h1>{props.greeting}</h1>;
```

</CodeSurfer>

<Notes>
Source: https://www.robinwieruch.de/react-pass-props-to-component
</Notes>

---

<Content>

## Props are read only and do not make components interactive. Need state for that

import StatefulApp from './components/part1/StatefulApp'

<StatefulApp />
</Content>

---

<CodeSurfer>

```jsx
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx subtitle="Set up state" 5:7
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx subtitle="Update state onClick" 15:17
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx subtitle="Conditional rendering" 13
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx title="Can you pass state as props to children" 19,29,30
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
 
  render() {
    const greeting = 'Now you see me';
 
    return (
      <div>
        <Greeting greeting={greeting} isShow={this.state.isShow} />
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting, isShow }) =>
  isShow ? <h1>{greeting}</h1> : null;
```

</CodeSurfer>

---

# How to pass props from child to parent?

<Steps>
NO  üò≠ , there is no way to pass props from a child to a parent component

Lets try to add a Button component for toggling
</Steps>

---

<CodeSurfer>

```jsx
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
 
        <button onClick={
          () => this.setState(state => ({ isShow: !state.isShow }))
        } type="button">
          Toggle Show
        </button>
      </div>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx title="Try to Add Button Component"
class StatefulApp extends React.Component {
  constructor(props) {
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {isShow ? <Greeting greeting={greeting} /> : null}
        <Button />
      </div>
    );
  }
}

class Button extends Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
 
  render() {
    return (
      <button onClick={this.toggleShow} type="button">
        Toggle Show
      </button>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx subtitle="‚ùå Button cannot pass isShow as props to App ‚ùå"  6[10:15],7[10:15]
class StatefulApp extends React.Component {
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {isShow ? <Greeting greeting={greeting} /> : null}
        <Button />
      </div>
    );
  }
}

class Button extends Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
 
  render() {
    return (
      <button onClick={this.toggleShow} type="button">
        Toggle Show
      </button>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```


```jsx title="Only solution is to lift the state up"
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
        <Button onClick={this.toggleShow} />
      </div>
    );
  }
}

class Button extends Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
 
  render() {
    return (
      <button onClick={this.toggleShow} type="button">
        Toggle Show
      </button>
    );
  }
}
 
const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

```jsx subtitle="App component passes down a function in the props to the Button "
class StatefulApp extends React.Component {
  constructor(props) {
    super(props);
 
    this.state = {
      isShow: true,
    };
  }
 
  toggleShow = () => {
    this.setState(state => ({ isShow: !state.isShow }));
  };
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
        <Button onClick={this.toggleShow} />
      </div>
    );
  }
}

const Button = ({ onClick }) => (
  <button onClick={onClick} type="button">
    Toggle Show
  </button>
);

const Greeting = ({ greeting }) => <h1>{greeting}</h1>;
```

</CodeSurfer>

---

<CodeSurfer>

```jsx title="Composing React Components with children prop"
class StatefulApp extends React.Component {
  ...
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
        <Button onClick={this.toggleShow} />
      </div>
    );
  }
}

const Button = ({ onClick }) => (
  <button onClick={onClick} type="button">
    Toggle Show
  </button>
);
```

```jsx subtitle="You can put anything between the closing tags"
class StatefulApp extends React.Component {
  ...
  render() {
    const greeting = 'Now you see me';
    return (
      <div>
        {this.state.isShow ? <Greeting greeting={greeting} /> : null}
        <Button onClick={this.toggleShow}>Toggle Show</Button>
      </div>
    );
  }
}
 
const Button = ({ onClick, children }) => (
  <button onClick={onClick} type="button">
    {children}
  </button>
);
```

</CodeSurfer>

---

<CodeSurfer>

```jsx title="Passing Components as Props"
const User = ({ user }) => (
  <Profile user={user}>
    <AvatarRound user={user} />
  </Profile>
);
 
const Profile = ({ user, children }) => (
  <div className="profile">
    <div>{children}</div>
    <div>
      <p>{user.name}</p>
    </div>
  </div>
);
 
const AvatarRound = ({ user }) => (
  <img className="round" alt="avatar" src={user.avatarUrl} />
);
```

```jsx subtitle="Use regular props if passing more than one component"
const User = ({ user }) => (
  <Profile
    user={user}
    avatar={<AvatarRound user={user} />}
    biography={<BiographyFat user={user} />}
  />
);
 
const Profile = ({ user, avatar, biography }) => (
  <div className="profile">
    <div>{avatar}</div>
    <div>
      <p>{user.name}</p>
      {biography}
    </div>
  </div>
);
 
const AvatarRound = ({ user }) => (
  <img className="round" alt="avatar" src={user.avatarUrl} />
);
 
const BiographyFat = ({ user }) => (
  <p className="fat">{user.biography}</p>
);
```

</CodeSurfer>

---

<CodeSurfer>

```jsx title="Slot Pattern" 
const User = ({ user }) => (
  <Profile
    user={user}
    avatar={<AvatarRound user={user} />}
    biography={<BiographyFat user={user} />}
  />
);
 
const Profile = ({ user, avatar, biography }) => (
  <div className="profile">
    <div>{avatar}</div>
    <div>
      <p>{user.name}</p>
      {biography}
    </div>
  </div>
);
 
const AvatarRound = ({ user }) => (
  <img className="round" alt="avatar" src={user.avatarUrl} />
);
 
const BiographyFat = ({ user }) => (
  <p className="fat">{user.biography}</p>
);
```

```jsx subtitle="Can exchange components dynamically"
const User = ({ user }) => (
  <Profile
    user={user}
    avatar={<AvatarSquare user={user} />}
    biography={<BiographyItalic user={user} />}
  />
);
 
const Profile = ({ user, avatar, biography }) => (
  <div className="profile">
    <div>{avatar}</div>
    <div>
      <p>{user.name}</p>
      {biography}
    </div>
  </div>
);
 
const AvatarSquare = ({ user }) => (
  <img className="square" alt="avatar" src={user.avatarUrl} />
);
 
const BiographyItalic = ({ user }) => (
  <p className="italic">{user.biography}</p>
);

const AvatarRound = ({ user }) => (
  <img className="round" alt="avatar" src={user.avatarUrl} />
);
 
const BiographyFat = ({ user }) => (
  <p className="fat">{user.biography}</p>
);
```

</CodeSurfer>


---

# Prop Drilling

import prop_drilling from './images/prop-drilling.png'

<img width="1200px" height="1200px" src={prop_drilling} />

<Notes>
  Image source: https://medium.com/@nguyencaophung/react-from-prop-drilling-to-use-hook-to-pass-data-in-app-3e3caad6a65f
</Notes>

---

# Use Context to Share Data

Read more [here](https://medium.com/@nguyencaophung/react-from-prop-drilling-to-use-hook-to-pass-data-in-app-3e3caad6a65f)

import context_to_share_data from './images/context-to-share-data.png'

<img width="1200px" height="1200px" src={context_to_share_data} />


---

# Part 2: Putting it together

## Let's try to to build a simple Q&A webapp that relies on a backend API

<a href="https://ancient-castle-17079.herokuapp.com/" target="_blank">Working Demo</a>

(Based on [React Tutorial: Building and Securing Your First App](https://auth0.com/blog/react-tutorial-building-and-securing-your-first-app/#What-You-Will-Build-with-React))

---

import vorstock from './images/vorstock.png'

# Achievement Level: Vostok (almost)

<img width="400px" height="400px" src={vorstock} />

- Web application with a database backend.
- Any type of application.
- A small set of core (CRUD) features.
- A good set of core features and a small set of extensions.
- ~~Basic testing~~
- ~~Basic documentation~~

---

# Full Stack Developement

import full_stack from './images/full-stack.png'

<img width="1000px" height="1000px" src={full_stack} />

---

# Backend APIs

- `GET /` - retrieve all questions
- `GET /:id` - get a specific question 
- `POST /` - insert a new question 
- `POST /answer/:id` - insert a new answer to the question 

---

# `GET /` - retrieve all questions

Run in terminal:

```bash
curl https://limitless-sands-43875.herokuapp.com
```

```
[{
  'id': 1,
  'title': 'How do I make a sandwich?',
  'description': 'Grab food is too expensive and I no $$',
  'answers': 1,
}]
```

---

# `GET /:id` - get a specific question

```bash
curl https://limitless-sands-43875.herokuapp.com/1
```

```
{
  'id': 1,
  'title': 'How do I make a sandwich?',
  'description': 'Grab food is too expensive and I no $$',
  'answers': 1,
}
```

---

# `POST /` - insert a new question 

```bash
curl -X POST -H 'Content-Type: application/json' -d '{
  "title": "How do I make a sandwich?",
  "description": "Grab food is too expensive and I no $$"
}' https://limitless-sands-43875.herokuapp.com/
```

---

# `POST /answer/:id` 

```bash
curl -X POST -H 'Content-Type: application/json' -d '{
  "answer": "Have you tried googling it?"
}' https://limitless-sands-43875.herokuapp.com/answer/1
```

---

# Set up your React Application

```bash
npx create-react-app frontend
# move into the new directory
cd frontend
# start your react app
npm start
```

---

import react_app from './images/react-app.png'

Go to `localhost:3000` on your web browser

<img width="750px" height="750px" src={react_app} />

---

# Install additional libraries

```bash
npm i react-router react-router-dom
```
- `react-router`: seamless navigation
- `react-router-dom`: provides DOM navigation bindings for React Router
- learn more about them [here](https://reacttraining.com/react-router/web/guides/quick-start)

---

`./src/App.js`

<CodeSurfer>

```jsx
import React, { Component } from 'react';

class App extends Component {
  render() {
    return (
      <div>
        <p>Work in progress.</p>
      </div>
    );
  }
}

export default App;
```

</CodeSurfer>